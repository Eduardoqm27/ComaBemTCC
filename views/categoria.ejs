<main>
    <!-- Gerenciamento de Produtos -->
    <section class="top-bar">
        <button id="btnToggleForm" class="btn-gerenciamento">Adicionar Produto</button>
    </section>

    <!-- Formulário de Adicionar Produto -->
    <section id="formAdicionarProduto" class="form-container hidden">
        <form
            action="/produto/adicionar"
            method="POST"
            enctype="multipart/form-data"
            class="form-tematico"
        >
            <h2>Adicionar Novo Produto</h2>
            <label for="nome">Nome do Produto:</label>
            <input type="text" name="nome_produto" id="nome" required />

            <label for="origem">Origem:</label>
            <input type="text" name="origem" id="origem" required />

            <label for="marca">Marca:</label>
            <input type="text" name="marca" id="marca" required />

            <label for="descricao">Descrição:</label>
            <textarea name="descricao" id="descricao" required></textarea>

            <label for="preco">Preço (R$):</label>
            <input type="number" name="preco" id="preco" step="0.01" required />

            <label for="foto">Foto:</label>
            <input type="file" name="imagem" id="foto" accept="image/*" required />

            <label for="desconto">Desconto (%):</label>
            <input type="number" name="promocao" id="desconto" min="0" max="100" />

            <label for="destaque">Destaque:</label>
            <input type="checkbox" name="destaque" id="destaque" />

            <label for="categoria">Categoria:</label>
            <select name="categoria" id="categoria" required>
                <option value="Fruta">Fruta</option>
                <option value="Legume">Legume</option>
                <option value="Verdura">Verdura</option>
                <option value="Kits">Kits</option>
            </select>

            <button type="submit" class="btn">Adicionar Produto</button>
        </form>
    </section>

    <!-- Lista de Produtos -->
    <section class="product-list">
        <h2>Produtos Cadastrados</h2>
        <div class="product-container">
            <% if (produtos && produtos.length > 0) { %>
                <% produtos.forEach((produto) => { %>
                    <div class="product-card">
                        <img src="/uploads/<%= produto.imagem %>" alt="<%= produto.nome_produto %>" />
                        <div class="product-info">
                            <h3><%= produto.nome_produto %></h3>
                            <p>Preço: R$ <%= parseFloat(produto.preco).toFixed(2).replace('.', ',') %></p>
                        </div>
                    </div>
                <% }); %>
            <% } else { %>
                <p>Nenhum produto cadastrado ainda.</p>
            <% } %>
        </div>
    </section>
</main>
<script>
    document.getElementById('btnToggleForm').addEventListener('click', () => {
        document.getElementById('formAdicionarProduto').classList.toggle('hidden');
    });
</script>
